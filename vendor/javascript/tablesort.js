// tablesort@5.6.0 downloaded from https://ga.jspm.io/npm:tablesort@5.6.0/src/tablesort.js

var t=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:global;var e={};(function(){function Tablesort(e,r){if(!((this||t)instanceof Tablesort))return new Tablesort(e,r);if(!e||e.tagName!=="TABLE")throw new Error("Element must be a table");this.init(e,r||{})}var r=[];var createEvent=function(t){var e;if(window.CustomEvent&&typeof window.CustomEvent==="function")e=new CustomEvent(t);else{e=document.createEvent("CustomEvent");e.initCustomEvent(t,false,false,void 0)}return e};var getInnerText=function(t,e){return t.getAttribute(e.sortAttribute||"data-sort")||t.textContent||t.innerText||""};var caseInsensitiveSort=function(t,e){t=t.trim().toLowerCase();e=e.trim().toLowerCase();return t===e?0:t<e?1:-1};var getCellByKey=function(t,e){return[].slice.call(t).find((function(t){return t.getAttribute("data-sort-column-key")===e}))};var stabilize=function(t,e){return function(r,n){var o=t(r.td,n.td);return o===0?e?n.index-r.index:r.index-n.index:o}};Tablesort.extend=function(t,e,n){if(typeof e!=="function"||typeof n!=="function")throw new Error("Pattern and sort must be a function");r.push({name:t,pattern:e,sort:n})};Tablesort.prototype={init:function(e,r){var n,o,s,i,a=this||t;a.table=e;a.thead=false;a.options=r;if(e.rows&&e.rows.length>0)if(e.tHead&&e.tHead.rows.length>0){for(s=0;s<e.tHead.rows.length;s++)if(e.tHead.rows[s].getAttribute("data-sort-method")==="thead"){n=e.tHead.rows[s];break}n||(n=e.tHead.rows[e.tHead.rows.length-1]);a.thead=true}else n=e.rows[0];if(n){var onClick=function(){a.current&&a.current!==(this||t)&&a.current.removeAttribute("aria-sort");a.current=this||t;a.sortTable(this||t)};for(s=0;s<n.cells.length;s++){i=n.cells[s];i.setAttribute("role","columnheader");if(i.getAttribute("data-sort-method")!=="none"){i.tabIndex=0;i.addEventListener("click",onClick,false);i.addEventListener("keydown",(function(e){if(e.key==="Enter"){e.preventDefault();onClick.call(this||t)}}));i.getAttribute("data-sort-default")!==null&&(o=i)}}if(o){a.current=o;a.sortTable(o)}}},sortTable:function(e,n){var o=this||t,s=e.getAttribute("data-sort-column-key"),i=e.cellIndex,a=caseInsensitiveSort,l="",d=[],u=o.thead?0:1,f=e.getAttribute("data-sort-method"),c=e.hasAttribute("data-sort-reverse"),b=e.getAttribute("aria-sort");o.table.dispatchEvent(createEvent("beforeSort"));if(!n){b=b==="ascending"?"descending":b==="descending"?"ascending":o.options.descending?"descending":"ascending";e.setAttribute("aria-sort",b)}if(!(o.table.rows.length<2)){if(!f){while(d.length<3&&u<o.table.tBodies[0].rows.length){p=s?getCellByKey(o.table.tBodies[0].rows[u].cells,s):o.table.tBodies[0].rows[u].cells[i];l=p?getInnerText(p,o.options):"";l=l.trim();l.length>0&&d.push(l);u++}if(!d)return}for(u=0;u<r.length;u++){l=r[u];if(f){if(l.name===f){a=l.sort;break}}else if(d.every(l.pattern)){a=l.sort;break}}o.col=i;for(u=0;u<o.table.tBodies.length;u++){var h,g=[],v={},w=0,m=0;if(!(o.table.tBodies[u].rows.length<2)){for(h=0;h<o.table.tBodies[u].rows.length;h++){var p;l=o.table.tBodies[u].rows[h];if(l.getAttribute("data-sort-method")==="none")v[w]=l;else{p=s?getCellByKey(l.cells,s):l.cells[o.col];g.push({tr:l,td:p?getInnerText(p,o.options):"",index:w})}w++}if(b==="descending"&&!c||b==="ascending"&&c)g.sort(stabilize(a,true));else{g.sort(stabilize(a,false));g.reverse()}for(h=0;h<w;h++){if(v[h]){l=v[h];m++}else l=g[h-m].tr;o.table.tBodies[u].appendChild(l)}}}o.table.dispatchEvent(createEvent("afterSort"))}},refresh:function(){(this||t).current!==void 0&&this.sortTable((this||t).current,true)}};e?e=Tablesort:window.Tablesort=Tablesort})();var r=e;export{r as default};

